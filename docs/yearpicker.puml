@startuml

actor "Test Script"
participant Datepicker
participant YearPicker
participant DisplayYear
participant PreviousYear
participant NextYear
participant Browser
participant Element

activate "Test Script"
activate Browser
"Test Script" -> Datepicker : pick(APRIL, 1, 2018)
activate Datepicker
Datepicker -> YearPicker : pickYear(2018)
activate YearPicker
YearPicker -> DisplayYear: displayYear()
activate DisplayYear
DisplayYear -> Browser: untilFound(CALENDAR)
Browser -> Element: <<create>>
activate Element
Element -> DisplayYear:
DisplayYear -> Element : getText(DISPLAY_YEAR)

Element -> YearPicker: displayYear
deactivate Element
deactivate DisplayYear

alt pick a future date

 loop (2018 - displayYear) times

      YearPicker -> NextYear: accept(browser)
      activate NextYear
      NextYear -> Browser : untilFound(CALENDAR)
      Browser -> Element: <<create>>
      activate Element
      Element -> NextYear : Element
      NextYear -> Element: click(NEXT_MONTH_BUTTON)
      deactivate Element
      deactivate NextYear
 end

else pick a past date

 loop (displayYear - 2018) times
     YearPicker -> PreviousYear: accept(browser)
     activate PreviousYear
     PreviousYear -> Browser : untilFound(CALENDAR)
     Browser -> Element: <<create>>
     activate Element
     Element -> PreviousYear : Element
     PreviousYear -> Element: click(PREV_MONTH_BUTTON)
     deactivate Element
     deactivate PreviousYear
 end
end

deactivate YearPicker
deactivate Datepicker


@enduml